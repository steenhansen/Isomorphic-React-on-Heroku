(()=>{"use strict";var t={8423:t=>{t.exports=class{constructor(t,e){for(var s in this.search_columns=e,this.search_not_found_accum=-1*e.length,this._indexed_access_table=[],t){var i=t[s];this._indexed_access_table.push(i)}this.size=this._indexed_access_table.length,this.defaultSortIndexes_=this.prepareIndexSet([])}getObjectAt(t){if(!(t<0||t>this.size)){var e=this.current_map[t];return this._indexed_access_table[e]}}getOriginalObjectAt(t){if(!(t<0||t>this.size))return this._indexed_access_table[t]}getSize(){return this.size}initialOrder(){var t=this.defaultSortIndexes_.slice();return this.currentMap(t),t}currentMap(t){this.current_map=t,this.size=this.current_map.length}sortIndexesByColumn(t,e,s){return s.sort(((s,i)=>{var r=this.getOriginalObjectAt(s)[t],o=this.getOriginalObjectAt(i)[t],a=0;return r>o&&(a=1),r<o&&(a=-1),0!==a&&1===e&&(a*=-1),a})),s}filterDataSet(t,e){var s=t.toLowerCase(),i=[],r={};for(var o of e){var a=this.getOriginalObjectAt(o),n=0,l={};for(let t of this.search_columns)if(a[t]){if("number"==typeof(h=a[t]))var h=h.toString();var _=h.toLowerCase().indexOf(s);l[t]=_,n+=_}else n+=-1;n!==this.search_not_found_accum&&(i.push(o),r[a._id]=l)}return{filteredIndexes:i,search_matches:r}}}},3150:(t,e,s)=>{var i=s(3804),r=s(6730);class o extends i.Component{constructor(t){super(t),this.media_description=t.media_description,this.site_url=t.site_url,this.record_cell_order_testing=t.record_cell_order_testing,this.filter_text="",this.sort_column="",this.sort_dir="",this.search_matches=[],this.clearAllFilters=this.clearAllFilters.bind(this),this._onFilterChange=this._onFilterChange.bind(this),this._onSortChange=this._onSortChange.bind(this)}_onFilterChange(t){if(t.target.value)e=t.target.value;else var e="";var s={filter_text:e};this.number_matches=this.changeGrid(s)}_onSortChange(t,e){var s={sort_column:t,sort_dir:e};this.number_matches=this.changeGrid(s)}generateCss(){var t=r.SFF_DARK_BLUE;return{clear_css:{cursor:"pointer",padding:0,margin:3},clear_hover_css:` .rsd-clear      { color: #${r.SFF_LIGHT_BLUE}; font-size:1em }\n                               .rsd-clear:hover { color: #${t} } `,column_sort_css:this._cssGeneration()}}numberMatchesLong(){if(""===this.filter_text)var t="";else{let e=this.number_matches;t=1===e?" 1 match":` ${e} matches`}return t}numberMatchesShort(){return""===this.filter_text?" ":" "+this.number_matches+" "}}t.exports=o},210:(t,e,s)=>{var i=s(3804);class r extends i.Component{constructor(t){super(t)}render(){var t=this.the_description;return i.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}}t.exports=r},155:(t,e,s)=>{var i=s(8423),r=s(1979);t.exports=class extends i{constructor(t,e){super(t,e)}bookTitleSort(t,e){var s=t["book title"].replace(/(“|”)/g,'"').split(e);s.length>1?(t.start_title=s[1],t.end_title=s[2]):(t.start_title="",t.end_title=s[0]),t["book title_"]=t.end_title.toLowerCase()}prepareIndexSet(t){var e=0,s=new RegExp(/^(a "|an "|the "|"|a |an |the )/i),i=0;for(var o of this._indexed_access_table){if(t.push(e),this.bookTitleSort(o,s),this.bookAuthorSort(o),this.timeLengthShorten(o),0===i){var a=o["episode number"];i=r.sizeOfLargestId(a)}var n=r.leadingZerosDigits(i,o["episode number"]);o.episode_number=n,e++}return t}bookAuthorSort(t){var e=t["book author"].split(" ");if("the"===e[0].toLowerCase())var s=e.shift(),i=e.join(" ");else i=e.pop(),s=e.join(" ");t.first_name=s,t.last_name=i,t["book author_"]=i.toLowerCase()}timeLengthShorten(t){if(t["hh:mm:ss"]&&!t.hh_mm){var e=t["hh:mm:ss"];if(e.startsWith("0"))t.hh_mm="0:"+e.substr(2,2);else{let s=e.split(":");t.hh_mm=s[0]+":"+s[1]}7===t["hh:mm:ss"].length&&(t["hh:mm:ss"]="0"+e)}}selectDataSet(t,e,s){var i=[];for(var r of e)this.getOriginalObjectAt(r)[s].toLowerCase()===t&&i.push(r);return i}}},5006:(t,e,s)=>{var i=s(3804),r=s(7196),o=s(6730);class a extends i.Component{constructor(t){super(t),this.site_url=t.site_url,this.EXTRA_WIDTH_STOP_SCROLL=o.HORIZONTAL_TABLE_MARGIN,this.data=t.data,this.filter_text=t.filter_text,this.search_matches=t.search_matches,this.search_columns=t.search_columns,this.displayed_columns=t.displayed_columns,this.calced_row_height=o.TABLE_UI_LINE_HEIGHT,this.sort_column=t.sort_column,this.state={row_count:this.data.getSize(),table_width:1,table_height:1,id_cell_width:1,text_cell_width:1},this._onResizeWindow=this._onResizeWindow.bind(this),this._updateTableSize=this._updateTableSize.bind(this),this.getRowHeight=this.getRowHeight.bind(this),this.tableGetsFocus=this.focusDiv.bind(this)}focusDiv(){this.refs.media_table_focus&&r.findDOMNode(this.refs.media_table_focus).focus()}componentDidMount(){this._updateTableSize(),window.addEventListener?window.addEventListener("resize",this._onResizeWindow,!1):window.attachEvent?window.attachEvent("onresize",this._onResizeWindow):window.onresize=this._onResizeWindow,this.focusDiv()}componentDidUpdate(){this.state.active&&this.focusDiv()}_onResizeWindow(){clearTimeout(this._updateTimer),this._updateTimer=setTimeout(this._updateTableSize,o.REACT_UPDATE_DELAY)}_updateTableSize(){let t=document.getElementById(this.media_container_name);if(null===t)var e=o.RSD_SFFAUDIO_CONTAINER_WIDTH-this.EXTRA_WIDTH_STOP_SCROLL;else e=t.parentElement.clientWidth-this.EXTRA_WIDTH_STOP_SCROLL;var{number_rows:s,id_cell_width:i}=this.rowsMainCellWidth(e);this.calced_row_height=36*s;var r=e-i,a=window.innerHeight-o.VERTICAL_TABLE_MARGIN;this.setState({row_count:this.data.getSize(),table_width:e,table_height:a,id_cell_width:i,text_cell_width:r})}getRowHeight(){return this.calced_row_height}}t.exports=a},6670:(t,e,s)=>{var i=s(3804),r=s(5108);const{Cell:o}=r;class a extends i.Component{constructor(t){super(t),this.displayed_data={},this.site_url=t.site_url}_pass_lint_(){}colorSortedText(t,e){if("book author_"===e){var s=this.displayed_data.first_name,i=this.displayed_data.last_name;this.displayed_data["book author"]=`<span class="first-book-author">${s}</span> <span class="last-book-author">${i}</span>`}else if("book title_"===e){var r=this.displayed_data.start_title,o=this.displayed_data.end_title;this.displayed_data["book title"]=`<span class="start-book-title">${r}</span><span class="end-book-title">${o}</span>`}else if("hh:mm:ss"===e){var a=this.displayed_data.hh_mm;this.displayed_data.hh_mm=`<span class="sort-by-hh-mm-ss">${a}</span>`}else if("pdf page count 1"===e){var n=this.displayed_data["pdf page count 1"];this.displayed_data["pdf page count 1"]=`<span class="sort-pdf-page-count-1">${n}</span>`}else for(let s of t)if(s===e){var l="sort-by-"+e,h=this.displayed_data[s];this.displayed_data[s]=`<span class="${l}">${h}</span>`}}boldSearchText(t,e,s,i){for(let _ of e){var r=s[t][_];if(-1!==r&&this.displayed_data[_]){if("number"==typeof(o=this.displayed_data[_]))var o=o.toString();var a=r+i.length,n=o.substring(0,r),l=o.substring(r,a),h=o.substring(a);this.displayed_data[_]=`${n}<span class="search-highlight">${l}</span>${h}`}}}fixTheText(){var{rowIndex:t,data:e,displayed_columns:s,sort_column:i,filter_text:r,search_columns:o,search_matches:a}=this.props;for(let i of s)this.displayed_data[i]=e.getObjectAt(t)[i];if(""!==r){var n=e.getObjectAt(t)._id;this.boldSearchText(n,o,a,r)}""!==i&&this.colorSortedText(s,i)}}t.exports=a},116:(t,e,s)=>{var i=s(6730),r=s(8454),o=s(6444),a=s(3804),n=s(3150),l=s(8571),h=s(512);t.exports=class extends n{_pass_lint_(){}constructor(t){super(t),this.site_url=t.site_url,this.story_count=t.data_list.length,this.pdfs_count=t.media_options.pdfs_count,this.search_columns=["book author","book title","pdf info 1","pdf country 1","pdf info 2","pdf country 2","pdf info 3","pdf country 3","pdf info 4","pdf country 4","pdf page count 1"];var e=t.data_list;this.pdf_list=new o(e,this.search_columns),this.displayed_columns={pdf_text_cell:["episode_number","book author","first_name","last_name","book title","start_title","end_title","story link on wikipedia","author wikipedia entry","pdf link 1","pdf page count 1","pdf country 1","pdf info 1","pdf link 2","pdf page count 2","pdf country 2","pdf info 2","pdf link 3","pdf page count 3","pdf country 3","pdf info 3","pdf link 4","pdf page count 4","pdf country 4","pdf info 4"]},this.pdf_list.initialOrder(),this.state={associated_pdf_list:this.pdf_list}}changeGrid(t){this.saveRestrictions(t);var e=this.pdf_list.initialOrder();if(""===this.filter_text)this.search_matches={};else{var{filteredIndexes:s,search_matches:i}=this.pdf_list.filterDataSet(this.filter_text,e);e=s,this.search_matches=i}""!==this.sort_column&&(e=this.pdf_list.sortIndexesByColumn(this.sort_column,this.sort_dir,e));var r="";if(this.record_cell_order_testing)for(var o of e)r+=","+o;return this.TEST_EPISODE_ORDER=r,this.pdf_list.currentMap(e),this.setState({associated_pdf_list:this.pdf_list,table_width:this.table_width,table_height:this.table_height}),e.length}saveRestrictions(t){void 0!==t.table_width&&(this.table_width=t.table_width),void 0!==t.table_height&&(this.table_height=t.table_height),void 0!==t.filter_text&&(this.filter_text=t.filter_text),void 0!==t.sort_column&&(this.sort_column=t.sort_column),void 0!==t.sort_dir&&(this.sort_dir=t.sort_dir)}clearAllFilters(){this.number_matches=this.changeGrid({filter_text:"",sort_column:"",sort_dir:""});var t=this.refs.the_pdf_table._updateTableSize;clearTimeout(this._updateTimer),this._updateTimer=setTimeout(t,i.REACT_UPDATE_DELAY)}_cssGeneration(){var t=i.SFF_DARK_BLUE;return`\n      .sort-pdf-page-count-1 { color: #${t}; font-weight: bold; }\n      .search-highlight       { color: #${t}; font-weight: bold; }\n\n      .first-book-author      { color: #${t}; font-weight: bold; }\n      .last-book-author       { color: #${t}; font-weight: bold; font-size: 120%; }\n\n      .start-book-title       { color: #${t}; font-weight: bold; }\n      .end-book-title         { color: #${t}; font-weight: bold; font-size: 120%; }\n\n       `}render(){var{pdf_clear_css:t,clear_hover_css:e,column_sort_css:s}=this.generateCss(),i=this.search_matches;let o=this.numberMatchesLong();if(this.pdfs_count)var n=` There are ${this.story_count} stories with ${this.pdfs_count} unique PDFs`;else n=` There are ${this.story_count} stories`;return a.createElement("div",{id:"pdf-media-container"},a.createElement(h,{pdf_description:this.media_description}),n,a.createElement("br",null),a.createElement("style",{scoped:!0,dangerouslySetInnerHTML:{__html:e}}),a.createElement("button",{onClick:this.clearAllFilters,style:t,className:"pdf-clear CLEAR-TEXT"},"Reset"),a.createElement("input",{onChange:this._onFilterChange,className:"TEXT-FILTER filter-text",value:this.filter_text,autoComplete:"off",placeholder:"Search ..."})," ",o,a.createElement("style",{scoped:!0,dangerouslySetInnerHTML:{__html:s}}),a.createElement(l,{cb_PdfComponent_titleSort:this._onSortChange}),a.createElement(r,{data:this.pdf_list,filter_text:this.filter_text,search_matches:i,ref:"the_pdf_table",media_container_name:"pdf-media-container",site_url:this.site_url,search_columns:this.search_columns,displayed_columns:this.displayed_columns,sort_column:this.sort_column}),a.createElement("div",{className:"TEST-EPISODE-ORDER"},this.TEST_EPISODE_ORDER))}}},512:(t,e,s)=>{var i=s(210);t.exports=class extends i{constructor(t){super(t),this.the_description=t.pdf_description}}},6444:(t,e,s)=>{var i=s(155);t.exports=class extends i{constructor(t,e){super(t,e)}}},8454:(t,e,s)=>{function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}).apply(this,arguments)}var r=s(3804),o=s(5006),a=s(5108);const{Column:n,Table:l}=a;var h=s(4671),_=s(6730);t.exports=class extends o{constructor(t){super(t),this.site_url=t.site_url,this.media_container_name=t.media_container_name}_pass_lint_(){}rowsMainCellWidth(){return this.number_rows=3.7,{number_rows:3.7,id_cell_width:0}}render(){var{table_width:t,table_height:e,text_cell_width:s}=this.state;this.rowsMainCellWidth(t);var o=this.props.data.getSize(),a=_.TABLE_UI_LINE_HEIGHT*this.number_rows;return r.createElement("div",null,r.createElement(l,i({ref:"media_table_focus",rowHeight:a,rowsCount:o,headerHeight:0,stopReactWheelPropagation:!0,keyboardScrollEnabled:!0,keyboardPageEnabled:!0,touchScrollEnabled:!0,width:t,height:e,rowHeightGetter:this.getRowHeight},this.props),r.createElement(n,{columnKey:"pdf_text_column",cell:r.createElement(h,{data:this.props.data,filter_text:this.props.filter_text,search_matches:this.props.search_matches,search_columns:this.props.search_columns,tableGetsFocus:this.tableGetsFocus,site_url:this.site_url,displayed_columns:this.displayed_columns.pdf_text_cell,sort_column:this.props.sort_column}),flexGrow:1,width:s})))}}},4671:(t,e,s)=>{var i=s(5108);const{Cell:r}=i;var o=s(6670),a=s(3804);t.exports=class extends o{constructor(t){super(t),this.site_url=t.site_url}_pass_lint_(){}render(){this.fixTheText();var{"story link on wikipedia":t,"author wikipedia entry":e,"book author":s,"book title":i}=this.displayed_data;if(t)var o=`   <a href="${t}" target="_blank" >${i}</a> `;else o=i;if(e)var n=`   <a href="${e}" target="_blank" >${s}</a> `;else n=s;var l=` ${o} by ${n} <br>`;return l+=this.pdfLinks(),a.createElement(r,{className:"PDF-STORY",onMouseEnter:this.props.tableGetsFocus},a.createElement("div",{dangerouslySetInnerHTML:{__html:l}}))}pdfLinks(){let t=this.site_url,e="";for(var s=1;s<=4;s++)if(this.displayed_data["pdf link "+s]){let r=this.displayed_data["pdf link "+s],o=this.displayed_data["pdf page count "+s];var i="pages";"number"==typeof o?1===o&&(i="page"):o.indexOf(">1<")>-1&&(i="page");let a=this.displayed_data["pdf info "+s],n="";this.displayed_data["pdf country "+s].toLowerCase().indexOf("canada")>-1&&(n=` <img src="${t}ca.svg"  class="country-flag" >`),e+=`<div style="margin-left:22px"><a href="${r}" target="_blank">\n                                       <i class="my-pdf fa fa-file-pdf-o"></i> ${n}${o} ${i} ${a} </a> </div>  `}return e}}},8571:(t,e,s)=>{var i=s(6730),r=s(3804);class o extends r.Component{constructor(t){super(t),this.arrow_types={"-1":i.UP_ARROW_CHAR,1:i.DOWN_ARROW_CHAR},this.title_texts={episode_number:"Uploaded","book author_":"Author","book title_":"Title","pdf page count 1":"Pages"},this.sort_directions={episode_number:1,"book author_":1,"book title_":1,"pdf page count 1":1},this.current_titles=[],this.current_titles.episode_number="Uploaded"+this.arrow_types[1],this.resetAllSorts("episode_number"),this.clickEpisodeNumber=this.clickEpisodeNumber.bind(this),this.clickBookAuthor=this.clickBookAuthor.bind(this),this.clickBookTitle=this.clickBookTitle.bind(this),this.clickPageCount=this.clickPageCount.bind(this),this.state={current_titles:this.current_titles}}resetAllSorts(t){for(var e in this.sort_directions)e!==t&&(this.current_titles[e]=this.title_texts[e]+" "+this.arrow_types[-1]+this.arrow_types[1])}clickEpisodeNumber(){this.handleTitleClick("episode_number")}clickBookAuthor(){this.handleTitleClick("book author_")}clickBookTitle(){this.handleTitleClick("book title_")}clickPageCount(){this.handleTitleClick("pdf page count 1")}handleTitleClick(t){var e=-1*this.sort_directions[t];this.sort_directions[t]=e,this.current_titles[t]=this.title_texts[t]+this.arrow_types[e],this.props.cb_PdfComponent_titleSort(t,e),this.resetAllSorts(t),this.setState({current_titles:this.current_titles})}render(){var t={cursor:"pointer",padding:0,margin:3},e=i.SFF_DARK_BLUE,s=` .pdf-sort { color: #${i.SFF_LIGHT_BLUE}; font-size:1em }\n                     .pdf-sort:hover { color: #${e} }          `,{episode_number:o,"book author_":a,"book title_":n,"pdf page count 1":l}=this.current_titles;return r.createElement("div",null,r.createElement("style",{scoped:!0,dangerouslySetInnerHTML:{__html:s}}),r.createElement("button",{className:"EPISODE-SORT pdf-sort",onClick:this.clickEpisodeNumber,style:t},o),r.createElement("button",{className:"TITLE-SORT pdf-sort",onClick:this.clickBookTitle,style:t},n),r.createElement("button",{className:"AUTHOR-SORT pdf-sort",onClick:this.clickBookAuthor,style:t},a),r.createElement("button",{className:"PAGE-SORT pdf-sort",onClick:this.clickPageCount,style:t},l))}}t.exports=o},6730:t=>{var e={SFF_DARK_BLUE:"1a4e88",SFF_LIGHT_BLUE:"2255AA",IMG_LOGO:"ReadingShortAndDeepLogo200x200.jpg",RSD_SFFAUDIO_CONTAINER_WIDTH:570,MAX_MOBILE_ITEMS:0,MAX_DESKTOP_ITEMS:0,UP_ARROW_CHAR:String.fromCharCode(8593),DOWN_ARROW_CHAR:String.fromCharCode(8595),TABLE_UI_LINE_HEIGHT:36,REACT_UPDATE_DELAY:16,VERTICAL_TABLE_MARGIN:100,HORIZONTAL_TABLE_MARGIN:20};t.exports=e},9721:(t,e,s)=>{window.onerror=function(t,e,s,i,r){var o=["Message: "+t,"URL: "+e,"Line: "+s,"Column: "+i,"Error object: "+JSON.stringify(r)].join(" - ");return console.log(o),!0};var i=s(3282),r=s(7196),o=s(116),a=i.react_createFactory(o)(window.PDF_MEDIA_PROPS_SCRIPT),n=i.PDF_REACT_CONTAINTER,l=document.getElementById(n);r.render(a,l)},3282:(t,e,s)=>{var i=s(3804),r={RSD_REACT_CONTAINTER:"rsd-react-container",PDF_REACT_CONTAINTER:"pdf-react-container",PODCAST_REACT_CONTAINTER:"podcase-react-container",LARGEST_TABLE_WIDTH_SFFAUDIO:570,react_createFactory:t=>i.createElement.bind(null,t),FONT_AWESOME_CDN:"https://use.fontawesome.com/releases/v5.0.13/css/all.css",WEBPACK_CHUNKS_DIR:"./mediaServer/chunks/",CSS_CHUNK_FILE:"./manifest-css.json",JS_CHUNK_FILE:"./manifest-js.json"};r.JS_CHUNK_PATH="./public/"+r.JS_CHUNK_FILE,r.CSS_CHUNK_PATH="./public/"+r.CSS_CHUNK_FILE,t.exports=r},1979:t=>{var e={sizeOfLargestId:function(t){var e=0+t;if(e>9999)var s=5;else s=e>999?4:3;return s},leadingZerosDigits:function(t,e){var s=-1*t;return String("00000"+e).slice(s)},toType:function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}};t.exports=e},3804:t=>{t.exports=React},7196:t=>{t.exports=ReactDOM}},e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i](r,r.exports,s),r.loaded=!0,r.exports}s.m=t,s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={708:0},e=[[9721,216]],i=()=>{};function r(){for(var i,r=0;r<e.length;r++){for(var o=e[r],a=!0,n=1;n<o.length;n++){var l=o[n];0!==t[l]&&(a=!1)}a&&(e.splice(r--,1),i=s(s.s=o[0]))}return 0===e.length&&(s.x(),s.x=()=>{}),i}s.x=()=>{s.x=()=>{},a=a.slice();for(var t=0;t<a.length;t++)o(a[t]);return(i=r)()};var o=r=>{for(var o,a,[l,h,_,c]=r,d=0,u=[];d<l.length;d++)a=l[d],s.o(t,a)&&t[a]&&u.push(t[a][0]),t[a]=0;for(o in h)s.o(h,o)&&(s.m[o]=h[o]);for(_&&_(s),n(r);u.length;)u.shift()();return c&&e.push.apply(e,c),i()},a=self.webpackChunkIsomorphic_React_on_Heroku=self.webpackChunkIsomorphic_React_on_Heroku||[],n=a.push.bind(a);a.push=o})(),s.x()})();